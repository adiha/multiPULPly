# LOOP0 loop0: for i in range(0, nb_iter)
# LOOP1 loop1: for i in range(0, nb_iter)
# LOOP2 unused
# LOOP3 unused
# LOOP4 unused
# LOOP5 unused

# mnemonics to simplify microcode writing
mnemonics:
    mat_off:        0
    vec_off:        1
    res_off:        2
    submat_off:     3
    subres_off:     4
    mat_height:     5
    num_of_vectors: 6
    mat_width:      7
    sub_mat_height: 8
    mat_width_div3: 9

# actual microcode
code:
    loop0:
        # 
        - {
            op : add,
            a : submat_off,
            b : mat_width,
        }
        - {
            op : add,
            a : submat_off,
            b : mat_width,
        }
        - {
            op : add,
            a : submat_off,
            b : mat_width,
        }
        - {
            op : add,
            a : subres_off,
            b : mat_width_div3,
        }

    loop1:
        # 
        - {
            op : add,
            a : mat_off,
            b : 3,
        }
        - {
            op : add,
            a : res_off,
            b : 1,
        }
        - {
            op : mv,
            a : submat_off,
            b : mat_off,
        }
        - {
            op : mv,
            a : subres_off,
            b : res_off,
        }

        
        
